/*Source: custom-menu-wizard.js
 *Compiled: 2015-09-10, Google Closure Compiler...
 *STATISTICS
 * - originalSize: 85715
 * - originalGzipSize: 19918
 * - compressedSize: 26591
 * - compressedGzipSize: 8560
*/
jQuery(function(g){
'use strict';
var x,L=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)/g,v=function(b,a){return(a?".":"")+"widget-custom-menu-wizard-"+b},A=function(b){var a=g(this).data().cmwDialogVersion.replace(/\./g,""),a=/^\d+$/.test(a)?"v"+a:a;x[a]?x[a].update(b?b.target:this):x.update(b?b.target:this)},C=function(b,a){var c=!1===b,d=c?{}:b.data(),e={},k=!c&&"2.1.0"===d.cmwDialogVersion,f={items:1,exclude:1},m=g.extend({branch_start:1,
exclude_level:1,include_level:1},f);g.each(c?a:b.find(":input").serializeArray(),function(a,b){var h=b.name.replace(/.*\[([^\]]+)\]$/,"$1"),p=!m[h]&&/^-?\d+$/.test(b.value)?parseInt(b.value,10):b.value;e[h]=p;"hide_empty"===h?e[h]=c||!!d.cmwV36plus||p:f[h]&&(e["_"+h+"_sep"]=!p||/(^\d+\+?$|,)/.test(g.trim(p))?",":" ",p=g.map(p.split(/[,\s]+/),function(a){var b=!k&&/\+$/.test(a);a=a?parseInt(a,10):0;return isNaN(a)||1>a?null:b?a+"+":a}),e["_"+h]=p.join(e["_"+h+"_sep"]))});return e},E=function(b,a,c,
d){var e=d.switch_if;return d.switch_at===b&&("current"===e&&a||"no-current"===e&&!a||"no-output"===e&&!c)},Q=function(b,a){b=g.trim(b||"");for(var c={title:"",level:1,branch:0,items:"",depth:0,depth_rel_current:0,start_at:"",start_mode:"",allow_all_root:0,ancestors:0,ancestor_siblings:0,include_root:0,include_level:"",siblings:0,exclude:"",exclude_level:"",contains_current:"",fallback:"",flat_output:0,title_from:"",title_linked:0,ol_root:0,ol_sub:0},d=L.exec(b),e={},k=0,f;d;)k++,d[1]?e[d[1]]=d[2]:
d[3]?e[d[3]]=d[4]:d[5]?e[d[5]]=d[6]:k--,d=L.exec(b);if(k)for(f in e)c.hasOwnProperty(f)&&(c[f]=e[f]);f=!!c.items;d=!f&&!!c.branch;e=!f&&!d;f&&(c.filter="items");if(d){c.filter="branch";f=c.start_at.toString();c.branch_start=f;if("0"===f||"branch"===f)c.branch_start="";"root"===f&&(c.branch_start="1");"children"===f&&(c.branch_start="+1");"parent"===f&&(c.branch_start="-1");if("current"===c.branch||"current-item"===c.branch)c.branch=0;else if(!/^[+\-]?\d+$/.test(c.branch.toString()))if(c.branch=c.branch.toLowerCase(),
f=a.find("a.cmw-item").filter(function(){return g(this).text().toLowerCase()===c.branch}),f.length)c.branch=f.parent().data("itemid");else return!1}e&&(c.filter="",c.level=Math.max(1,parseInt(c.level,10)));c.start_at=null;c.include_level||"1"!==c.include_root||(c.include_level="1");c.include_root=null;if(d&&!c.branch&&c.fallback&&(e=c.fallback.toLowerCase().split(/[\s,]+/),f=" "+e.join(" ")+" ",c.fallback="",0<=f.indexOf(" quit ")?c.fallback="quit":0<=f.indexOf(" parent ")?c.fallback="parent":0<=
f.indexOf(" current ")&&(c.fallback="current"),""!==c.fallback&&"quit"!==c.fallback))for(0<=f.indexOf(" +siblings ")&&(c.fallback_siblings=1),k=0;k<e.length;k++)if(/^\d+$/.test(e[k])&&(f=parseInt(e[k],10),0<f)){c.fallback_depth=f;break}if(c.title_from)for(e=c.title_from.toLowerCase().split(/[\s,]+/),k=0;k<e.length;k++)if(e[k])if("branch"===e[k]||"current"===e[k])c["title_"+e[k]]="0";else if(f=e[k].match(/^(branch|current)(-root|-parent|[+\-]?\d+)$/))"-root"===f[2]?c["title_"+f[1]]=1:"-parent"===f[2]?
c["title_"+f[1]]=-1:(c["title_"+f[1]]=f[2],c["title_"+f[1]]||(c["title_"+f[1]]=""));c.title_from=null;c.hide_empty=1;return C(!1,g.map(c,function(a,b){return null===a?a:{name:b,value:a}}))},M=function(b){var a="";b&&(a=b.replace(/[\r\n\t]+/g," ").replace(/^[\[\s]+/,"").replace(/[\s\/\]]+$/,"").split(/[\[\]]/)[0],a=g.trim(a.replace(/\/+$/,""))+" ",a=g.trim((" "+a.replace(/^cmwizard\s/,"")+" ").replace(/\smenu=[^\s]*\s/," ").replace(/\salternative=("[^"]*"|[^\s]*)\s/," ")),a=a.replace(/\s\s+/g," "));
return a},F=function(b,a){var c=a.find(".cmw-demo-themenu-ul"),d=c.data(),e=M(b.switch_to),e="cmwizard menu="+b.menu+(""===e?e:" "+e);d.altCode&&d.altCode===e||(d.altCode=e,d.altSettings=Q(e,c));a.find(".cmw-demo-alternative").addClass("updated").toggleClass("error",!1===d.altSettings);return!1===d.altSettings?!1:g.extend({},d.altSettings)},I=function(b,a,c){var d="tick"===c?a._items_sep:a._exclude_sep,e=[],k="tick"===c?"_items":"_exclude",k=a[k]?g.grep(a[k].split(d),function(a){return/\+$/.test(a)?
(e.push(parseInt(a,10)),!a):!!a}):[],k=d+k.join(d)+d,e=d+e.join(d)+d;b=b.each(function(){var a=g(this),b=a.data(),q=-1<e.indexOf(d+b.itemid+d),b=q||-1<k.indexOf(d+b.itemid+d);a.toggleClass("cmw-has-"+c,b).toggleClass("cmw-inherit-"+c,q)});return b.filter(".cmw-inherit-"+c).find("li").removeClass("cmw-has-"+c+" cmw-inherit-"+c).add(b.filter(".cmw-has-"+c))},y=function(b,a){return b[a?"find":"closest"](v("onchange",1))},N=function(b,a){var c=[],d=b.match(/^(\d+)(\+|-)?$/),e,d=d?[parseInt(d[1],10),d[2]||
""]:[];if(0<d[0])for(e=1;e<=a;e++)(e===d[0]||"-"===d[1]&&e<d[0]||"+"===d[1]&&e>d[0])&&c.push(".level-"+e);return c.join(",")},O=function(b,a){var c=b.find(".cmw-demo-themenu-ul"),d=c.find(".picked"),e="",k=a.hide_title?"":a.title,f=0,m=0,q=b.find(".cmw-demo-theoutput-wrap").empty(),r=["menu-widget"],h={};if(d.length&&q.length){k=c.find(".title-from-item").children(".cmw-item").text()||"";f=!!k&&!!a.title_linked;k||a.hide_title||(k=a.title||"");for(d.each(function(b){var c=g(this),d=c.data(),f=d.trace?
d.trace.toString().split(","):[];b=d.itemid.toString();var k=1,c=c.children(".cmw-item");if(!a.flat_output)for(h[b]=1,b=0;b<f.length;b++)h[f[b]]&&k++;if(m)if(k>m)e+=a.ol_sub?"<ol>":"<ul>";else{for(;m>k;)--m,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>"}e+='<li class="cmw-level-'+k+(d.included||"")+'"><a href="#'+c.data("indx")+'">'+c.text()+"</a>";m=k});1<m;)--m,e+="</li>"+(a.ol_sub?"</ol>":"</ul>");e+="</li>";r.push(b.find(".cmw-demo-fallback").data("fellback"));e=(a.ol_root?"<ol":"<ul")+' class="'+
g.trim(r.join(" "))+'">'+e+(a.ol_root?"</ol>":"</ul>");q.html(e);q.find("li").filter(function(){return!!g(this).children("ul, ol").length}).addClass("cmw-has-submenu")}q.length&&k&&(d.length||!a.hide_empty)&&q.prepend((f?'<h3 class="cmw-title-linked">':"<h3>")+k+"</h3>")},P=function(b,a,c){var d;b.find("optgroup").filter(function(){var a=g(this).data().cmwOptgroupIndex===c;a||g(this).remove();return a}).length||(d=g("#"+b.attr("id")+"_ignore").find("optgroup").eq(c).clone(),d.length&&(0<a&&(a=0),
b.append(d).val(a)));return a},R=function(b){b=g(this);var a=b.data(),c=!a.cmwAbsolute,d=b.closest(".ui-dialog"),e=d.find(".ui-dialog-content"),k=parseInt(d.css("top"),10)+(c?1:-1)*g(document).scrollTop();a.cmwAbsolute=c;a.cmwMaxHeight||(a.cmwMaxHeight=e.dialog("option","maxHeight"));b.button("option","icons",{primary:c?"ui-icon-circle-close":"ui-icon-circle-check"});d.toggleClass("cmw-assistance-dialog-fixed",!c);e.dialog("option",{maxHeight:c?!c:a.cmwMaxHeight});d.css("top",k);return!1},S=function(b){var a=
g(this);b=["current-menu-item","current-menu-parent","current-menu-ancestor"];var c=a.closest(".ui-dialog-content"),d=c.find(".cmw-demo-themenu-ul"),a=a.find("span").not("."+b[0]).parentsUntil(d,"li"),e,k=function(){this.title=this.title+" "+e.replace(" "," & ").replace(/-/g," ")};d.find("."+b.join(",.")).removeClass(b.join(" ")).each(function(){this.title=this.title.replace(/\s.*$/,"")});for(d=0;d<a.length;d++)e=1===d?b.join(" "):b[0],a.eq(d).children(".cmw-item").find("span").addClass(e).each(k),
1<b.length&&b.shift();A.call(g(c.data().cmwOnchange).get(0));return!1},T=function(){g(this).closest(".ui-dialog-content").find(".cmw-item").eq(this.href.split("#")[1]).not(":has(.current-menu-item)").trigger("click");this.blur();return!1},U=function(b){b=g(this);var a=b.hasClass("cmw-tick")?"tick":"cross",c=b.parent();b=c.closest(".cmw-demo-themenu-ul");var d=c.hasClass("cmw-inherit-"+a),e=d||c.hasClass("cmw-has-"+a),k=e?g([]):c.parentsUntil(b,".cmw-inherit-"+a),f=g(c.closest(".ui-dialog-content").data().cmwOnchange).find("tick"===
a?".cmw-setitems":".cmw-exclusions"),m;!b.hasClass("cmw-using-alternative")&&f.length&&(m=b.find(".cmw-has-"+a)[d||k.length?"not":"add"](c),!e||c.children("ul").length&&!b.parent().hasClass("cmw-version-210")?e&&!d&&(m=m.not(c.find(".cmw-has-"+a))):m=m.not(c),m=m.add(k.find("li").not(c)),m=m.map(function(){var b=this===c[0]||this===k.get(0)?e:g(this).hasClass("cmw-inherit-"+a);return g(this).data().itemid+(b?"+":"")}).get().join(/(,|^\d+\+?$)/.test(g.trim(f.val())||",")?",":" "),f.val(m).trigger("change"));
this.blur();return!1},V=function(b){var a={autoOpen:!1,width:Math.min(.9*g(window).width(),600),maxHeight:g(window).height()-40,modal:!1,containment:"window",create:function(){var a=g(this).closest(".ui-dialog");if(a.hasClass("cmw-assistance-dialog-fixed"))g("<button/>").addClass("cmw-dialog-fixed-absolute").button({label:b.cmwDialogFixed,icons:{primary:"ui-icon-circle-check"}}).appendTo(a.find(".ui-dialog-titlebar")).on("click",R)},dialogClass:"cmw-assistance-dialog cmw-assistance-dialog-fixed"},
c=g.map(["SetCurrent","Inclusions","Exclusions","Fallback","Alternative"],function(a){return'<div class="cmw-demo-'+a.toLowerCase()+' cmw-demo-small">'+(b["cmwDialog"+a]||"")+"</div>"}),c=g("<div/>",{id:b.cmwDialogId}).addClass(v("dialog")).append(g("<div/>").addClass("cmw-demo-themenu cmw-version-"+b.cmwDialogVersion.replace(/\./g,"")).html('<em class="cmw-demo-small">'+b.cmwDialogPrompt+"</em>")).append(g("<div/>").addClass("cmw-demo-theoutput").html('<em class="cmw-demo-small">'+b.cmwDialogOutput+
'</em><em class="cmw-demo-plugin-version cmw-demo-small">v'+b.cmwDialogVersion+"</em>"+c.shift()+'<div class="cmw-demo-theoutput-wrap ui-corner-all"></div>'+c.join(""))).append(g("<div/>").addClass("cmw-demo-theshortcode").html('<code class="ui-corner-all"></code><div class="cmw-find-shortcodes"><a href="#" class="button-secondary '+v("find-shortcodes")+'" data-nonce="'+(b.cmwDialogNonce||"")+'" title="'+b.cmwDialogShortcodes+'"><span class="spinner"></span><span>[&hellip;]</span></a></div><div class="cmw-demo-found-shortcodes cmw-demo-small ui-corner-all"></div>'));
c.dialog(a);c.find(".cmw-demo-themenu").on("click",".cmw-tick,.cmw-cross",U).on("click",".cmw-item",S);c.find(".cmw-demo-theoutput").on("click","a",T);return c},J=function(b,a){var c=a.find(".cmw-widget-title").val()||b.data().cmwUntitled;b.dialog("option","title","CMW : "+c+" ["+a.find(".cmw-select-menu").find("option:selected").text()+"]")},K=function(b){var a=g(b.data().cmwOnchange),c=parseInt(a.find(".cmw-select-menu").val(),10),d=b.find(".cmw-demo-themenu-ul"),e=[],k=0,f="",m=function(a){return 1<
a?'<a href="#" class="'+v("colexp")+' ui-icon ui-icon-triangle-1-e" style="left:-'+(2.4*(a-2)+2)+'em;">&nbsp;</a>':""};if(!d.length||d.data("menuid")!==c){for(a.find(".cmw-assist-items optgroup").find("option").each(function(a){for(var b=g(this),c=b.data().cmwLevel;c<e.length;)f+="</li></ul>"+m(e.length),e.pop();c>e.length?f+="<ul>":(f+="</li>",e.pop());f+='<li class="level-'+c+'" data-itemid="'+this.value+'" data-level="'+c+'" data-trace="'+e.join(",")+'">';f+='<a href="#" class="cmw-cross ui-corner-all"></a>';
f+='<a class="cmw-item ui-corner-all" href="#" data-indx="'+a+'"><span class="ui-corner-all" title="#'+this.value+'">'+g.trim(b.text());f+='</span></a><a href="#" class="cmw-tick ui-corner-all"></a>';e.push(this.value);c>k&&(k=c)});e.length;)f+="</li></ul>"+m(e.length),e.pop();d.remove();b.find(".cmw-demo-themenu").append(g(f).addClass("cmw-demo-themenu-ul").data({maxLevel:k,menuid:c}))}};x={setLevels:function(b,a){var c=b.find(".cmw-branch-start"),d=c.val();a&&(c.find("optgroup").each(function(b){var c=
g(this),d=c.find("option"),m=d.length,q=c.data();if(b)for(d.slice(a).remove();m<a;)++m,c.append(g("<option/>",{value:m}).text(m));else for(m=(m+1)/2,m>a&&d.each(function(b,c){Math.abs(c.value)>=a&&g(c).remove()});m<a;)c.prepend(g("<option/>",{value:-m}).text(-m+(1<m?"":" ("+q.cmwTextParent+")"))).append(g("<option/>",{value:"+"+m}).text("+"+m+(1<m?"":" ("+q.cmwTextChildren+")"))),++m}),/^\d+$/.test(d)?d>a&&c.val("1"):""!==d&&Math.abs(d)>=a&&c.val(""),b.find(".cmw-set-rel-abs-levels").each(function(){var b=
g(this),c=b.find("optgroup"),d=c.find("option").length/2+1,m=b.val(),q=Math.max(2,a);Math.abs(m)>=a&&b.val(0>m?1-a:a-1);d!==q&&c.each(function(a,b){var c=g(b),e=c.data().cmwTextForOption,k;d>q&&c.find("option").slice(q-d).remove();for(k=d;k<q;k++)c.append(g("<option/>",{value:a?k:-k}).text(e.replace("%d",a?k:-k)))})}),b.find(".cmw-include-level,.cmw-exclude-level").each(function(){var b=g(this),c=b.find("option"),d=(c.length-1)/3,m=b.val(),q=c.eq(2).text(),r=c.eq(3).text();for(c.slice(3*a+1).remove();d<
a;)++d,b.append(g("<option/>",{value:d}).text(d)).append(g("<option/>",{value:d+"-"}).text(q.replace(/\d+/,d))).append(g("<option/>",{value:d+"+"}).text(r.replace(/\d+/,d)));parseInt(m,10)>a&&b.val("")}),b.find(".cmw-set-levels").each(function(){var b=g(this),c=b.data(),d=c.cmwTextLevels||"",c=c.cmwSetLevels||0,m=b.find("option"),q=m.length-c;b.val()>a&&b.val(m.eq(0).val());for(b.find("option").slice(c+a).remove();q<a;)++q,b.append(g("<option/>",{value:q}).text(q+d))}))},setFields:function(b,a){var c=
a.find(".cmw-bybranch"),d=a.find(".cmw-byitems").prop("checked"),e=d||!c.prop("checked"),k=a.find(".cmw-assist-items"),f=parseInt(k.val(),10);b.hasClass("cmw-select-menu")?(f=P(k,f,b[0].selectedIndex),this.setLevels(a,(k.find("optgroup").data()||{}).cmwMaxLevel)):b.hasClass("cmw-level")?(e=!0,d=!e,a.find(".cmw-bylevel").prop("checked",e)):b.is(k)?(e=d=!1,c.prop("checked",!e)):b.hasClass("cmw-setitems")?(e=d=!0,a.find(".cmw-byitems").prop("checked",d)):b.hasClass("cmw-ancestors")&&"0"===b.val()?a.find(".cmw-ancestor-siblings").val("0"):
b.hasClass("cmw-ancestor-siblings")&&"0"!==b.val()&&"0"===a.find(".cmw-ancestors").val()&&a.find(".cmw-ancestors").val(b.val());c=a.find(".cmw-fallback").val();g.each({"-ss":d,"-ud":d||1>a.find(".cmw-depth").val(),"not-br":e,"not-br-ci":e||!!f,"not-fb-pc":e||!!f||"parent"!==c&&"current"!==c,"not-sw":!!a.find(".cmw-switchable").filter(function(){return!g(this).val()}).length},function(b,c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c)})},shortcode:function(b){var a={menu:b.menu},c="branch"===
b.filter,d="items"===b.filter,e,k;b.title&&!b.hide_title&&(a.title=[b.title]);!c&&!d&&1<b.level&&(a.level=b.level);c&&(a.branch=b.branch||"current",b.branch_start&&(a.start_at=[b.branch_start]),"level"===b.start_mode&&(a.start_mode=["level"]),b.allow_all_root&&(a.allow_all_root=1));d?a.items=[b._items]:(0<b.depth&&(a.depth=b.depth),b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=1));c&&!b.branch&&b.fallback&&(a.fallback=[b.fallback],"quit"!==b.fallback&&(b.fallback_siblings&&a.fallback.push("+siblings"),
b.fallback_depth&&a.fallback.push(b.fallback_depth)));c&&b.ancestors&&(a.ancestors=b.ancestors,b.ancestor_siblings&&(a.ancestor_siblings=b.ancestor_siblings));b.include_level&&(a.include_level=[b.include_level]);b._exclude&&(a.exclude=[b._exclude]);b.exclude_level&&(a.exclude_level=[b.exclude_level]);d=[];""!==b.title_current&&d.push("current"+(b.title_current?b.title_current:""));c&&""!==b.title_branch&&d.push("branch"+(b.title_branch?b.title_branch:""));d.length&&(a.title_from=d,b.title_linked&&
(a.title_linked=1));for(d in{siblings:1,flat_output:1,ol_root:1,ol_sub:1,fallback_ci_parent:1,fallback_ci_lifo:1})b[d]&&(a[d]=1);c={contains_current:"",container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""};for(d in c)b[d]!==c[d]&&(a[d]=[b[d]]);c={wrap_link:"before",wrap_link_text:"link_before"};for(d in c)(e=b[c[d]].toString().match(/^<(\w+)/))&&e[1]&&(a[d]=[e[1]]);b.switch_if&&b.switch_at&&(a.alternative=[b.switch_if,b.switch_at],k=M(b.switch_to));c=[];for(d in a)c.push(g.isArray(a[d])?
d+'="'+a[d].join(",")+'"':d+"="+a[d]);return"[cmwizard "+c.join(" ")+(k?"]"+k+"[/cmwizard]":"/]")},structureUpdate:function(b,a,c){var d=-1,e=9999,k=0,f=0,m="",q=null,r,h,p,n,u="menu",t="branch"===a.filter,v="items"===a.filter,y=!t&&!v,x=t&&!a.branch,G=!c&&!!a.switch_if&&!!a.switch_at,B=b.find(".cmw-demo-themenu-ul"),z=B.data().maxLevel,w=B.find(".current-menu-item").closest("li"),D=w.length?w.data().level:-1,l=B.find("li").removeData("included").removeClass("title-from-item"),H=a.depth,A=a.depth_rel_current,
C=I(l,a,"cross");h=l.length&&w.is(l);a.contains_current!==u||h||(l=g([]));if(G&&E(u,h,l.length,a)&&(q=F(a,b),!1!==q))return q;u="primary";v&&l.length&&(l=I(l,a,"tick"));t&&l.length&&(p=x?w:l.filter("[data-itemid="+a.branch+"]"),p.length?(d=p.data().level||0,l=p.add(p.find("li")),r=p):l=g([]));if(y&&l.length&&1<a.level){h=1;for(n=[];h<a.level;h++)n.push(".level-"+h);l=l.not(n.join(","))}h=l.length&&w.is(l);a.contains_current!==u||h||(l=g([]));if(G&&E(u,h,l.length,a)&&(q=F(a,b),!1!==q))return q;u="secondary";
if(y&&l.length&&H&&(h=A&&D>=a.level?D:a.level,h+=H,h<=z)){for(n=[];h<=z;h++)n.push(".level-"+h);l=l.not(n.join(","))}if(t&&l.length&&(n=parseInt(a.branch_start,10),n=isNaN(n)||!n?d:a.branch_start.match(/^(\+|-)/)?Math.max(1,d+n):n,x&&a.fallback&&!w.find("li").length&&(m="cmw-fellback-to-"+a.fallback,"quit"===a.fallback?n=z+1:(n="current"===a.fallback||2>d?d:d-1,a.fallback_depth&&(H=a.fallback_depth,A=1))),n>z?l=g([]):(n<d&&(p=p.parentsUntil(B,"li.level-"+n)),"level"===a.start_mode&&n<=d&&(1<n||a.allow_all_root)?
l=p.parent().find("li"):n<d&&(l=p.add(p.find("li"))),m&&a.fallback_siblings&&l.length&&(1<n||a.allow_all_root)&&(l=l.add(p.siblings("li.level-"+n)))),l.length)){d=n;p=9999;H&&(p=A&&D>=d&&l.filter(w).length?D:d,p+=H,e=p-1);h=1;for(n=[];h<=z;h++)h>=d&&h<p&&n.push(".level-"+h);l=l.filter(n.join(","))}h=l.length&&w.is(l);a.contains_current!==u||h||(l=g([]));if(G&&E(u,h,l.length,a)&&(q=F(a,b),!1!==q))return q;u="inclusions";if(t&&l.length){n=r.data().level;if(a.ancestors&&(r.is(l)||n>e)){h=a.ancestors;
0>h&&(h=Math.max(1,n+h));d=a.ancestor_siblings;0>d&&(d=Math.max(1,n+d));n=[];for(p=[];h<=z;h++)h<=e&&(n.push(".level-"+h),0<d&&h>=d&&p.push(".level-"+h));h=l.length;n=r.parentsUntil(B,n.join(","));l=l.add(n.not(l).data("included"," cmw-an-included-ancestor"));p.length&&(l=l.add(n.filter(p.join(",")).siblings("li").not(l).data("included"," cmw-an-included-ancestor-sibling")));k+=l.length-h}a.siblings&&r.is(l)&&(n=l.length,l=l.add(r.siblings("li").data("included"," cmw-an-included-sibling")),k+=l.length-
n)}l.length&&a.include_level&&(p=N(a.include_level,z))&&(n=l.length,l=l.add(B.find(p)),k+=l.length-n);h=l.length&&w.is(l);a.contains_current!==u||h||(l=g([]));if(G&&E(u,h,l.length,a)&&(q=F(a,b),!1!==q))return q;u="output";l.length&&C.length&&(n=l.length,l=l.not(C),f+=n-l.length);l.length&&a.exclude_level&&(p=N(a.exclude_level,z))&&(n=l.length,l=l.not(p),f+=n-l.length);h=l.length&&w.is(l);a.contains_current!==u||h||(l=g([]));if(G&&E(u,h,l.length,a)&&(q=F(a,b),!1!==q))return q;""!==a.title_current&&
w.length?0===a.title_current?w.addClass("title-from-item"):(h=0<a.title_current?Math.min(D,a.title_current):Math.max(1,D+a.title_current),w.closest(".level-"+h).addClass("title-from-item")):t&&r&&""!==a.title_branch&&(0===a.title_branch?r.addClass("title-from-item"):(h=r.data().level,h=0<a.title_branch?Math.min(h,a.title_branch):Math.max(1,h+a.title_branch),r.closest(".level-"+h).addClass("title-from-item")));b.find(".cmw-demo-fallback").data("fellback",m).toggleClass("updated",!!m);b.find(".cmw-demo-setcurrent").toggleClass("error",
!w.length&&(!!a.contains_current||x));c||null!==q||b.find(".cmw-demo-alternative").removeClass("error updated");b.find(".cmw-demo-themenu-ul").toggleClass("cmw-using-alternative",!!c);h={inclusions:k,exclusions:f};for(n in h)p=b.find(".cmw-demo-"+n),p.text(p.text().replace(/\d+$/,h[n])).toggleClass("updated",0<h[n]);B.toggleClass("cmw-demo-filteritems",v).find(".picked").not(l.addClass("picked")).removeClass("picked");return!1},update:function(b){var a=g(b);b=y(a);var c=g("#"+b.data().cmwDialogId),
d;a.hasClass("cmw-listen")&&this.setFields(a,b);d=C(b);c.length&&c.dialog("isOpen")&&(c.dialog("moveToTop"),a.hasClass("cmw-select-menu")&&K(c),a=this.structureUpdate(c,d),!1!==a&&this.structureUpdate(c,a,!0),J(c,b),O(c,a||d));b.add(c).find("code").not(".cmw-instance-shortcode").text(this.shortcode(d))},v210:{setLevels:function(b,a){var c=b.find(".cmw-start-level"),d=c.val(),e=c.find("option").length,k;d>a&&c.val(1);for(c.find("option").slice(a).remove();e<a;)++e,c.append(g("<option/>",{value:e}).text(e));
c=b.find(".cmw-depth");d=c.val();e=c.find("option").length;k=c.data().cmwTextLevels;d>a&&c.val(0);for(c.find("option").slice(a+1).remove();e<=a;)c.append(g("<option/>",{value:e}).text(e+k)),++e},setFields:function(b,a){var c=a.find(".cmw-showall").prop("checked"),d=a.find(".cmw-showspecific").prop("checked"),e=a.find(".cmw-assist-items"),k=parseInt(e.val(),10);b.hasClass("cmw-select-menu")&&(k=P(e,k,b[0].selectedIndex),this.setLevels(a,(e.find("optgroup").data()||{}).cmwMaxLevel));g.each({"":c||d,
"-ss":d,"not-rp":c||d||0<=k,"not-ci":c||d||!!k},function(b,c){a.find(".cmw-disableif"+b).toggleClass("cmw-colour-grey",c).find("input,select").prop("disabled",c)})},shortcode:function(b){var a={menu:b.menu},c=0<b.filter,d=!!b.filter&&!c,e;b.title&&(a.title=[b.title]);if(c)switch(b.filter_item){case 0:a.children_of=["current"];break;case -1:a.children_of=["parent"];break;case -2:a.children_of=["root"];break;default:a.children_of=b.filter_item}d&&(a.items=[b._items]);c&&0>b.filter_item&&b.fallback_no_ancestor&&
(a.fallback_parent=b.fallback_include_parent_siblings?["siblings"]:b.fallback_include_parent?["parent"]:1);c&&!b.filter_item&&b.fallback_no_children&&(a.fallback_current=b.fallback_nc_include_parent_siblings?["siblings"]:b.fallback_nc_include_parent?["parent"]:1);1<b.start_level&&(a.start_level=b.start_level);0<b.depth&&(a.depth=b.depth);b.depth_rel_current&&0<b.depth&&(a.depth_rel_current=1);d=[];c&&(b.include_parent_siblings?d.push("siblings"):b.include_parent&&d.push("parent"),b.include_ancestors&&
d.push("ancestors"),d.length&&(a.include=d));d=[];c&&b.title_from_parent&&d.push("parent");b.title_from_current&&d.push("current");d.length&&(a.title_from=d);for(d in{flat_output:1,contains_current:1,ol_root:1,ol_sub:1})b[d]&&(a[d]=1);c={container:"div",container_id:"",container_class:"",menu_class:"menu-widget",widget_class:""};for(d in c)b[d]!==c[d]&&(a[d]=[b[d]]);c={wrap_link:"before",wrap_link_text:"link_before"};for(d in c)(e=b[c[d]].toString().match(/^<(\w+)/))&&e[1]&&(a[d]=[e[1]]);c=[];for(d in a)c.push(g.isArray(a[d])?
d+'="'+a[d].join(" ")+'"':d+"="+a[d]);return"[custom_menu_wizard "+c.join(" ")+"]"},update:function(b){var a=g(b);b=y(a);var c=g("#"+b.data().cmwDialogId),d,e,k,f,m,q,r,h,p,n,u,t,v;a.hasClass("cmw-listen")&&this.setFields(a,b);if(c.length&&c.dialog("isOpen")){c.dialog("moveToTop");a.hasClass("cmw-select-menu")&&K(c);f=C(b);d=!f.filter;a=0<f.filter;e=!d&&!a;m=f.include_parent;q=f.include_parent_siblings;r=c.find(".cmw-demo-themenu-ul");k=r.data().maxLevel;p=r.find(".current-menu-item").closest("li");
n=p.length?p.data().level:-1;h=r.find("li").removeData("included").removeClass("title-from-item");e&&(h=I(h,f,"tick"));h.length&&!p.length&&(f.contains_current||a&&1>f.filter_item)&&(h=g([]));h.length&&a&&(0<f.filter_item?t=h.filter("[data-itemid="+f.filter_item+"]"):f.filter_item?1===n&&f.fallback_no_ancestor?(t=p,m=m||f.fallback_include_parent,q=q||f.fallback_include_parent_siblings,u="cmw-fellback-to-current"):t=1===n?r:-1>f.filter_item?r.find(".current-menu-ancestor").eq(0).closest("li"):r.find(".current-menu-parent").closest("li"):
p.find("li").length?t=p:f.fallback_no_children&&(t=r.find(".current-menu-parent").closest("li"),t.length||(t=r),m=m||f.fallback_nc_include_parent,q=q||f.fallback_nc_include_parent_siblings,u="cmw-fellback-to-parent"));if(h.length)if(d)for(v=f.depth_rel_current&&f.depth&&p.length&&n>=f.start_level?n+f.depth-1:f.depth?f.start_level+f.depth-1:9999,d=1;d<=k;d++){if(d<f.start_level||d>v)h=h.not(".level-"+d)}else t&&t.length?(v=f.depth_rel_current&&f.depth&&p.length&&t.has(p[0]).length?n-1+f.depth:f.depth?
Math.max((t.data().level||0)+f.depth,f.start_level+f.depth-1):9999,h=t.find("li").filter(function(){var a=g(this).data().level;return a>=f.start_level&&a<=v})):a&&(h=g([]));h.length&&a&&t&&t.is("li")&&(q&&(h=h.add(t.siblings("li").data("included"," cmw-an-included-parent-sibling")),m=!0),f.include_ancestors&&(h=h.add(t.parentsUntil(r,"li").data("included"," cmw-an-included-ancestor")),m=!0),m&&(h=h.add(t.data("included"," cmw-the-included-parent"))));!h.length||!f.contains_current||p.length&&h.filter(p).length||
(h=g([]));f.title_from_parent&&h.length&&t&&t.is("li")?t.addClass("title-from-item"):f.title_from_current&&h.length&&p.addClass("title-from-item");u=h.length?u:"";c.find(".cmw-demo-fallback").data("fellback",u).toggleClass("updated",!!u);c.find(".cmw-demo-setcurrent").toggleClass("error",!p.length&&(f.contains_current||a&&1>f.filter_item));r.toggleClass("cmw-demo-filteritems",e).find(".picked").not(h.addClass("picked")).removeClass("picked");J(c,b);O(c,f);c.find("code").text(this.shortcode(f))}}}};
g(document).on("change",v("onchange",1),A).on("click",v("assist",1),function(b){b=g(this);b=y(b);var a=b.data(),c=g("#"+a.cmwDialogId);c.length||(c=V(a).data({cmwOnchange:"#"+b.attr("id"),cmwUntitled:"["+a.cmwDialogUntitled+"]"}));c.dialog("isOpen")?c.dialog("close"):(K(c),J(c,b),c.dialog("open"),A.call(b[0]));this.blur();return!1}).on("click",v("fieldset",1),function(b){b=g(this);var a=b.next(".cmw-fieldset-state"),c=!a.prop("checked");a.length&&(a.prop("checked",c),b.toggleClass("cmw-collapsed-fieldset",
c),a.next("div")[c?"slideUp":"slideDown"]());this.blur();return!1}).on("click",".widget-action,.widget-control-close",function(b){b=g(this).closest("div.widget");var a=b.parent();a.hasClass("customize-control-widget_form")&&!a.hasClass("expanded")||y(b,1).each(function(){var a=g("#"+g(this).data().cmwDialogId);a.length&&a.dialog("isOpen")&&a.dialog("close")})}).on("click",".widget-control-remove",function(b){b=g(this).closest("div.widget");y(b,1).each(function(){var a=g("#"+g(this).data().cmwDialogId);
a.length&&(a.dialog("destroy"),a.remove())})}).on("click",v("colexp",1),function(b){b=/1-e/.test(this.className)?"slideUp":"slideDown";g(this).toggleClass("ui-icon-triangle-1-s ui-icon-triangle-1-e").prev("ul")[b]();return!1}).on("click",v("find-shortcodes",1),function(b){b=g(this);var a=b.parent().parent();ajaxurl&&!a.hasClass("cmw-ajax-fetching")&&(a.hasClass("cmw-ajax-showing")?a.removeClass("cmw-ajax-showing"):(a.addClass("cmw-ajax-fetching"),g.get(ajaxurl,{action:"cmw-find-shortcodes",_wpnonce:b.data().nonce}).done(function(b){b&&
"0"!==b&&(a.find(".cmw-demo-found-shortcodes").html(g(b).find("response_data").text()),a.addClass("cmw-ajax-showing"))}).always(function(b){a.removeClass("cmw-ajax-fetching")})));this.blur();return!1}).on("click",v("legacy-close",1),function(){g(this).parent().remove();return!1});window.Custom_Menu_Wizard_Widget&&g(window.Custom_Menu_Wizard_Widget.trigger||[]).trigger("change")});